<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Blog</title>

<script src="site_libs/header-attrs-2.1/header-attrs.js"></script>
<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>




<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 60px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h2 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h3 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h4 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h5 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h6 {
  padding-top: 65px;
  margin-top: -65px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">GIS 420/520 - Advanced GIS</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Projects
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="project_1.html">Risk Assessment</a>
    </li>
  </ul>
</li>
<li>
  <a href="calendar.html">Calendar</a>
</li>
<li>
  <a href="blog.html">Blog</a>
</li>
<li>
  <a href="../../index.html">CGA-WM</a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Blog</h1>

</div>

<div id="TOC">
<ul>
<li><a href="#a-case-study">A Case Study</a></li>
<li><a href="#growing-pains">Growing Pains</a></li>
<li><a href="#hacking-python">Hacking Python</a></li>
<li><a href="#toolbox-revelation">Toolbox Revelation</a></li>
<li><a href="#the-jekyll">The Jekyll</a></li>
</ul>
</div>

<hr />
<div id="a-case-study" class="section level2">
<h2>A Case Study</h2>
<div id="section" class="section level4">
<h4>2020-02-24</h4>
<p>This week, we take a look at how far we’ve gotten towards modeling our landslide susceptibility. Here’s what’s been done so far.</p>
<ol style="list-style-type: decimal">
<li><p>Decide on a town or city.</p>
<ul>
<li>For this case study, I chose Collbran, Colorado because it was listed as having the largest landslide in Colorado (cite Wikipedia article).</li>
</ul></li>
<li><p>Decide on a CRS</p>
<ul>
<li>I have chosen NAD83 UTM 13N because the datum matches the DEM data I found (see next point) and is also recommended by CDOT (missing link)</li>
</ul></li>
<li><p>Download digital elevation data (e.g., <a href="https://viewer.nationalmap.gov/basic/">The National Map</a>)</p>
<ul>
<li>I had to download two tiles n40w108 and n40w109 because my town is located near the tile intersection</li>
</ul>
<p><img src="images/2020-02-24_dem.png" /></p></li>
<li><p>Project raster(s)</p></li>
<li><p>Add city to the map by creating a plain text file (e.g., point.txt), creating an XY Point table (such as the one below), and importing to GIS</p>
<pre><code>ID,LAT,LON,CITY,STATE
0,39.240016,-107.963956,Collbran,CO</code></pre>
<p><img src="images/2020-02-24_dem_dot.png" /></p></li>
<li><p>Project point</p></li>
<li><p>Extract DEM by mask (e.g., buffer or poly)</p>
<ul>
<li>Chose to create a 10 km buffer around my town because the town limits was pretty small and a 10 km buffer area is less than 100,000 acres—the maximum area for downloading a web soil survey spatial map</li>
<li>Note: I had to use Cell Statistics to knit together two DEM tiles after mask extraction; I chose to knit after extraction because the files are smaller and processing time would be faster.</li>
</ul>
<p><img src="images/2020-02-24_dem_buff.png" /></p></li>
<li><p>Calculate slope</p>
<ul>
<li>Raster dataset (<a href="https://drive.google.com/file/d/1Ga08i5TkKl-J_83qyaLQgQoWoi5dN3_z/view?usp=sharing">geotiff</a>)</li>
</ul>
<p><img src="images/2020-02-24_slope.png" /></p></li>
<li><p>Download soil data (e.g., <a href="https://websoilsurvey.sc.egov.usda.gov/App/HomePage.htm">Soil Web Survey</a>)</p>
<ul>
<li>To get my Area of Interest (AOI), I exported the buffer to a shape file and used the shapefile to set my AOI</li>
<li>Soil Web Survey AOI shapefile and tabular data (<a href="https://drive.google.com/file/d/1Yi5MA91dbeu9_uNt6yMithPhKhyQ3vLf/view?usp=sharing">zip</a>)</li>
</ul>
<p><img src="images/2020-02-24_soils.png" /></p></li>
<li><p>Figure out what the soil survey is actually saying</p>
<ul>
<li>Data is from the Digital General Soil Map of the United States (STATSGO2) database (see Tables and Columns report found <a href="https://www.nrcs.usda.gov/wps/portal/nrcs/detail/soils/survey/geo/?cid=nrcs142p2_053631">here</a>) and uses a map unit key (MUKEY) and map unit symbol (MUSYM) to relate the shapefile’s attribute table to soil information (presumably in the tabular files)</li>
<li>Files of interest:
<ul>
<li>comp.txt (link between mapunit key and component key)</li>
<li>chorizon.txt (link between component key and horizon key)</li>
<li>chunifie.txt (link between horizon key and horizon unified classification)</li>
<li>muagatt.txt (link between map unit symbol and minimum bedrock depth, cm)</li>
</ul></li>
<li>I need to build a table that matches map unit key –&gt; component key –&gt; horizon key –&gt; unified classification –&gt; angle of friction/cohesion</li>
<li>First attempt at adding ASCII table to ArcGIS Pro failed (everything dumped into a single field; so, it doesn’t seem to recognize the pipe character “|” as a delimiter)</li>
</ul></li>
</ol>
<p><strong>Current Challenges</strong></p>
<ul>
<li>Create a table/link between map units (in the attribute table) to unified soil classification (in chunifie.txt)</li>
<li>Create a table of unified soil classification and soil cohesion and angle of friction (<em>which values to choose and why</em>)</li>
<li>Create a table/link between map symbols and minimum bedrock depth (cm) found in muagatt.txt</li>
</ul>
<hr />
</div>
</div>
<div id="growing-pains" class="section level2">
<h2>Growing Pains</h2>
<div id="section-1" class="section level5">
<h5>2020-02-20</h5>
<p>Sometimes you realize that starting simple isn’t actually a bad thing and ambition gets the better of you.</p>
<p>In the first crack at the advanced GIS class, I went all in on tackling problems I don’t have answers to. My thinking was, if I don’t know the answer, then students may feel more at ease at trying new methods and experimenting with various approaches. The reality is, none of us know what to do and little to nothing gets done.</p>
<p>The first set back was definitely the website (my fault). Naively, I guessed that Jekyll’s “simple blogging site” would be just a matter of a few mouse clicks, edit these few fields, and away you go. The spread out documentation and lack of good tutorials played the first minor key and set the tune of this composition. The upside is, I now have a working template that I can share with students so they don’t have the same struggle I did. (REMINDER: share your Jekyll site template).</p>
<p>Not having class the first week of the semester has also created a challenge as we have an unbalanced before-and-after spring break schedule. I’ve opted for a longer second half of the semester project, since exams and projects in other classes tend to slow down a class’s pace.</p>
<p>In hindsight, next iteration should play more to my own strengths (i.e., water); though, I would not have been able to come up with several ideas integral to the class if I hadn’t stumbled at this first attempt.</p>
<p>That’s growing pains for you.</p>
<hr />
</div>
</div>
<div id="hacking-python" class="section level2">
<h2>Hacking Python</h2>
<div id="section-2" class="section level5">
<h5>2020-02-17</h5>
<p>In an effort to run a simple python script in the CGA classroom, I opted to create an example python script that showcases a basic class structure that can be easily manipulated. The hope was to use this as a launching point towards writing a python-based toolbox for the first part of this class.</p>
<p>Of course, Python 3 does not run from the command line on the classroom’s machines, even though a version of Python 3 is installed.</p>
<p>A first ditch effort was to add to the user’s environment variables the path to the Python 3 executable, which completely and utterly failed. <em>Caveat, a student adeptly pointed out that by changing the executable’s name from Python.exe to Python3.exe, you can totally call it from the command line.</em> Rather, I went through the arduous process of hacking into ArcGIS Pro’s python environment, which is a three-step process:</p>
<ol style="list-style-type: decimal">
<li>Clone the original Python 3 environment used by ArcGIS Pro</li>
<li>Append the path to the ArcGIS/Pro/bin/Python/Scripts folder to the user environments</li>
<li>Activate the cloned python environment from the command line</li>
</ol>
<p>This seems completely ridiculous at first glance; however, in my opinion, programming works best when the testing environment is separate from the working environment.</p>
<p><strong>Jekyll Updates</strong></p>
<p>I attempted to leave Jekyll behind for an alternative blogging site (<a href="https://bookdown.org/yihui/blogdown/">R blogdown</a>), but after a few hours, it became obvious that this was <em>even more complicated than Jekyll</em>.</p>
<p>So, I have finally decided to read through some of the Jekyll documentation and in doing so, I have created my blog site. This required creating a _posts directory that contains very specifically named markdown files and creating a blog.md (with a proper YAML header) that uses Liquid tags to read each markdown file in my _posts directory and prints them in reverse chronological order.</p>
<p>Finally.</p>
<p>The other success story was removing the <code>overflow=hidden</code> property from my navigation menu; now I can see all my buttons in a tiny window! I also added a responsive element to the CSS to make the navigation bar twice the height when the screen size is small.</p>
<p>I feel that I have reached some small level of nirvana. It has only taken several weeks and many lost hours of development to get here.</p>
<p><strong>Update</strong></p>
<p>After getting a Jekyll blogging website to work, I decided that that mountain has been climbed and I’ve torn it down and rebuilt it using <a href="https://rmarkdown.rstudio.com/lesson-13.html">R Markdown Website</a>, which I use for my <a href="https://spatial-data-discovery.github.io/">Spatial Data Discovery</a> class.</p>
<p>The example Jekyll site template that I got working is available <a href="https://drive.google.com/file/d/1zlClR6zW6RO-MaarbzzUisDM1ChPiZMp/view?usp=sharing">here (zip)</a> for those brave enough to venture forth.</p>
<ul>
<li>add blog posts to _post directory</li>
<li>add any files (.txt, .zip, .png) to assets folder to link from anywhere on the website</li>
<li>use the “navigation_weight” in the YAML header to order your navigation bar entries</li>
</ul>
<p>So long Jekyll, it’s been… emotional.</p>
<hr />
</div>
</div>
<div id="toolbox-revelation" class="section level2">
<h2>Toolbox Revelation</h2>
<div id="section-3" class="section level5">
<h5>2020-02-10</h5>
<p>This week in advanced GIS, I wrapped up my first draft of a working ArcGIS Toolbox for the CGA’s Middle Earth class. The class tutorial relied on a toolbox that was created several years ago using <code>arcgisscripting</code>, which had suddenly and unexpectedly stopped working. I took upon the challenge of upgrading <code>arcgisscripting</code> to <code>arcpy</code> for ArcGIS Pro as I debugged the code.</p>
<p>The first setback was testing the code, because the workflow for a toolbox is not clearly defined anywhere. Therefore, I started just as I would any project with a basic script separated into functions, classes, and the <code>if __name__ is "__main__"</code> block at the bottom.</p>
<p>While I found a method for hacking into ArcGIS Pro’s python environment, on my laptop, I am already hacking into OSGEO4W’s (QGIS) python, so I’m a little frustrated with switching back-and-forth between the two for the ease of command-line use (I tried virtual environments, but it doesn’t like the PYTHON_PATH environment variable linking to OSGEO4W).</p>
<p>Having tested a good portion of the python script via importing the class on ArcGIS Pro’s python command line and running through the methods with the typical debugging, I approached the “all-in” moment to go to the toolbox PYT script (you literally just change the file extension from .py to .pyt), but now as a toolbox, you gain access to drop-down menus and the progress bar (secret messages!). As I loaded the PYT into Python as a new toolbox, I was having to wait 5–10 minutes before the toolbox became available and I kept getting this RUNTIME ERROR message before I finally realized that that stinking <code>if __name__ is "__main__"</code> is actually running when the toolbox is loaded! So I removed it and now the toolbox loads super quick. There is still the lingering problem where I create dependencies on folder location in the tool class’s init, which also, interestingly, is called when the toolbox is imported and has created errors when sharing a toolbox in a folder that moves from one computer to another as the absolute paths change.</p>
<p>This, to be addressed at another time.</p>
<p><strong>Update</strong>: the SPI toolbox has been forked from WildlifeConservationSocietyCI’s SPI repository and is available at the <a href="https://github.com/cga-wm/spi">CGA-WM GitHub organization</a>.</p>
<p><strong>Jekyll Updates</strong></p>
<p>The navigation bar still haunts me. I was able to get a CSS style that makes the navigation bar stay at the top of the screen, but I can’t seem to make it responsive to screen width. Sorry to those of you looking at this website on mobile devices. I also found a way to create an ordered navigation using a sort by navigation_weight variable that I added to each page’s YAML header.</p>
<p>This can be considered a positive development.</p>
<hr />
</div>
</div>
<div id="the-jekyll" class="section level2">
<h2>The Jekyll</h2>
<div id="section-4" class="section level5">
<h5>2020-02-03</h5>
<blockquote>
<p>Jekyll, thou art a villainous foe.</p>
</blockquote>
<p>In all good intentions, I had planned that we utilize the “simple blogging site” that is Jekyll and GitHub Pages for communicating the learning objectives of this class. Little did I know, that Jekyll sites are truly miserable to get a handle on. Despite all the resources I have found, there are no good “starting a blog site” instructions for this pairing. The Jekyll help pages are simply that, help pages—no tutorials or templates.</p>
<p>My goals:</p>
<ul>
<li>only use markdown rather than HTML (<strong>failed</strong>)
<ul>
<li>you have to create at least one HTML file (i.e., the default.html in _layouts directory)</li>
</ul></li>
<li>have Jekyll static site generator handle all the style (<strong>failed</strong>)
<ul>
<li>Jekyll themes seem to require a style.scss in assets/css, which you don’t realize you need until you go to the theme’s GitHub page</li>
<li>in my opinion, a modern-day website should include a navigation bar, which Jekyll seems to omit with its themes (I chose the theme <a href="https://github.com/pages-themes/slate">slate</a>).</li>
</ul></li>
<li>simply upload blog posts that are automatically rendered to my website (<strong>failed</strong>)
<ul>
<li>to get blog posts on to your website, you have to design a web page and somehow link to your post content, which is not entirely clear</li>
</ul></li>
</ul>
<p>Overall, I am washed with a feeling of dissatisfaction.</p>
<hr />
</div>
</div>

<footer class="myfoot">
    <div class="foot-text">
        <p>CGA at William &amp; Mary (2020)</p>
    </div>
</footer>



</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
